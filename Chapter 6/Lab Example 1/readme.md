# Chapter 6: Lab Example 1

In this lab example, we will use MATLAB and Simulink to run a simple BCI system. We will go through the processes of a typical BCI system, such as neural activity detection, amplification, noise reduction, feature extraction, and an output command.

## Steps

First, follow this link. 

EEG Feature Extraction Toolbox - File Exchange - MATLAB Central (mathworks.com)

Download the EEG Feature Extraction Toolbox. Make sure that this toolbox is unzipped and in your MATLAB drive. Then, navi-gate to the Github page for this textbook and go to Chapter 6 Lab Example 1. You will find two MATLAB files one called de-pressed_signals.m and healthy_signals.m. You want to download both of those files. Open them in MATLAB and run each of them.  This MATLAB script generated artificial EEG signals that produced EEG signals from healthy controls and then EEG sig-nals that exhibited depression-related features. After this, you should see two variables in your Workspace: heatlhy_signals and depressed_signals. These variables in your workspace are essen-tial for the Simulink model to work correctly. Now, navigate to the Home tab and open up Simulink.

![image](https://github.com/user-attachments/assets/09d0ed13-4a77-4871-bfa8-a2db27396a2e)

Once in Simulink, navigate to the Library Browser and insert the following boxes: two signals from workspace boxes, two Band-pass filter boxes, a MATLAB code box, two scope boxes, and two lamps. 
For the two Signal From Workspace boxes, double-click them, and under Signal, type healthy signal for one box and depressed signal for the other. These boxes will take the EEG data generated by the first MATLAB code given at the beginning of the exam-ple. You then want to connect one of these boxes to the Bandpass Filter boxes. These filter boxes will clean up the EEG signal and reduce the amount of noise. Double click your Bandpass Filter Box and set each to these Parameters.

![image](https://github.com/user-attachments/assets/54609e0c-e795-47e4-99dc-34114187252c)

Then, connect both Bandpass Filter boxes to the MATLAB code box. The MATLAB code box is then attached to each of the scope boxes. In your MATLAB code box insert the code from the textbook or find it in the folder of this GitHub page. This code is the signal processing and feature extraction part of our BCI. This is what your BCI should look like in Simulink.

![image](https://github.com/user-attachments/assets/a47dcfae-a479-49fa-a72e-48cf509e25d1)

For the lamps, double-click them. Under the Main tab, make sure to have a State of 0, which is the Color red, and a State of 1, which is the Color green. You want to ensure that one lamp is connected to the scope box with the healthyPulseControl variable and the other to the depressedPulsecontrol. To connect the lamp, click the chain icon above the lamp and click on the appropriate scope box. Your final BCI Simulink model should look like this. 
After you have created your Simulink BCI model, select run. De-pending on your computer, this simulation may take a few minutes to run, so donâ€™t be alarmed if it takes a few minutes. What we expect to see is that our BCI can distinguish between brain activity that is either healthy or exhibits features of de-pressed neural activity. Once the BCI detects that brain acidity is exhibiting features of depression, the BCI will generate a neu-rostimulation impulse to the neurons to try and correct this activi-ty. Our simulation is successful if our healthyPusleControl scope box has no pulse generation and our depressedPulse control does. Additionally, the lamp connected to the depressedPulse-Control should light up green when the pulse is delivered, and the other lamp should stay red. If this simulation happens too quickly, you can use the Step Forward button to see the color change.

![image](https://github.com/user-attachments/assets/fab88357-58ad-4a03-a468-bf9354dc6802)

## Other Examples and Resources 

Several other examples are available for you to use to keep ex-ploring BCI systems. One includes a hardware example using Muse 2016.
https://github.com/NeuroTechX/bci-workshop/blob/master/INSTRUCTIONS.md 
For more examples of practical applications of this chapter's con-tent, please visit the book's dedicated GitHub repository page using this link.
https://github.com/bddupre92/Neurobook_BME_UND
